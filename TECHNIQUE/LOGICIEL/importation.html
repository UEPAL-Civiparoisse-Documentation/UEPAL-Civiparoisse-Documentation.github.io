
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://uepal-civiparoisse-documentation.github.io/index.html/TECHNIQUE/LOGICIEL/importation.html">
      
      
        <link rel="prev" href="environnement_dev_env.html">
      
      
        <link rel="next" href="../INTEGRATION_CONTINUE/index.html">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.13">
    
    
      
        <title>Importation de données - Documentation UEPAL Civiparoisse</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#importation-initiale" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../../index.html" title="Documentation UEPAL Civiparoisse" class="md-header__button md-logo" aria-label="Documentation UEPAL Civiparoisse" data-md-component="logo">
      
  <img src="../../assets/uepal-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation UEPAL Civiparoisse
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Importation de données
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Partager" aria-label="Partager" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Onglets" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../index.html" class="md-tabs__link">
        
  
  
    
  
  Documentation Civiparoisse

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../UTILISATION/mode_emploi/index.html" class="md-tabs__link">
          
  
  
    
  
  Mode d'emploi

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../PRESENTATION/index.html" class="md-tabs__link">
          
  
  
    
  
  Présentation du projet

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../index.html" class="md-tabs__link">
          
  
  
    
  
  Eléments techniques

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../FORMATION/index.html" class="md-tabs__link">
          
  
  
    
  
  Formation

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="Documentation UEPAL Civiparoisse" class="md-nav__button md-logo" aria-label="Documentation UEPAL Civiparoisse" data-md-component="logo">
      
  <img src="../../assets/uepal-logo.svg" alt="logo">

    </a>
    Documentation UEPAL Civiparoisse
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation Civiparoisse
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../UTILISATION/mode_emploi/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Mode d'emploi
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Mode d'emploi
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/introduction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/debuter.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Débuter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/fiches_contact.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gérer les fiches
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/relations.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gérer les relations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/liens_paroisses.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gérer les liens avec la paroisse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/faire_des_recherches_sur_les_contacts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Faire des recherches sur les contacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/envoyer_un_courriel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Envoyer un courriel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/groupes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gérer les groupes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/listes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utiliser les listes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/que_faire_quand.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Que faire quand... ?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/gestion_des_dons_et_edition_des_recus_fiscaux.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gestion des dons et édition des reçus fiscaux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/creer_et_gerer_un_evenement.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Créer et gérer un événement
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/operations_a_mener_regulierement.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Opérations à mener régulièrement
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/gestion_base_donnees.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Administration locale de la base de données
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/prepaper_installation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Préparer l'installation initiale de CiviParoisse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/nouveautes_CiviParoisse.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Les nouveautés dans CiviParoisse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UTILISATION/mode_emploi/ressources.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ressources utiles
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../PRESENTATION/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Présentation du projet
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Présentation du projet
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../PRESENTATION/presentation_fonctionnelle.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Périmètre fonctionnel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../PRESENTATION/presentation_ecosysteme.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ecosystème projet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../PRESENTATION/presentation_livrables.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Livrables
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Eléments techniques
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Eléments techniques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../EXPLOITATION/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Exploitation
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Exploitation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../EXPLOITATION/logs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../POC/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    POC
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            POC
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../POC/remontage_local.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remontage en local
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../PREPOC/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    PRE_POC
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4" id="__nav_4_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            PRE_POC
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/prepoc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Description générale
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../PREPOC/ETUDES_PRECIS/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Etudes - précis techniques
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_3" id="__nav_4_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_3">
            <span class="md-nav__icon md-icon"></span>
            Etudes - précis techniques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/ETUDES_PRECIS/infrastructure.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Infrastructure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/ETUDES_PRECIS/trafic_entrant.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trafic initiateur entrant
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/ETUDES_PRECIS/traefik.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maquettage Traefik
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/ETUDES_PRECIS/identites_certificats.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Identités et certificats
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/ETUDES_PRECIS/waf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web Application Firewall
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/ETUDES_PRECIS/integration_ca.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Intégration CA Ubuntu
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/ETUDES_PRECIS/minikube_traefik_wildcard.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Minikube + Traefik + Wildcard
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../PREPOC/INTEGRATION/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Opérationnel
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_4" id="__nav_4_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_4">
            <span class="md-nav__icon md-icon"></span>
            Opérationnel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/deploiement_instance.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Déploiement instance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Description générale Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../PREPOC/INTEGRATION/DOCKER/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Images Docker
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_4_4" id="__nav_4_4_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_4_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_4_4">
            <span class="md-nav__icon md-icon"></span>
            Images Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/selfkeys.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    selfkeys
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/keys_init.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    keys_init
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/mysql_tls_router.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mysql_tls_router
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/mysql_tls_server.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mysql_tls_server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/composer_base.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    composer_base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/composer_files.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    composer_files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/tools.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/tools_debug" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    tools_debug
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/init.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    init
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/cron.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cron
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/httpd.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    httpd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/httpd_debug.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    httpd_debug
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/update.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    update
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/test_msmtp_dovecot.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    test_msmtp_dovecot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/gen_hashed_ca.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gen_hashed_ca
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/DOCKER/traefik_docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    traefik_docker
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_4_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../PREPOC/INTEGRATION/KUBERNETES/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_4_5" id="__nav_4_4_4_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_4_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_4_5">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/KUBERNETES/maquettage.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maquettage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/KUBERNETES/ressources.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ressources utiles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_4_5_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../PREPOC/INTEGRATION/KUBERNETES/HELM/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chart Helm
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_4_5_4" id="__nav_4_4_4_5_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_4_4_4_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_4_5_4">
            <span class="md-nav__icon md-icon"></span>
            Chart Helm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/KUBERNETES/HELM/description_generale.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Description générale
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/KUBERNETES/HELM/db_dbrouter.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DB et DB Router
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/KUBERNETES/HELM/httpd.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Serveur web interne
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/KUBERNETES/HELM/cron.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cron
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/KUBERNETES/HELM/volumes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Volumes (persistants)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/KUBERNETES/HELM/secrets.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Secrets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/KUBERNETES/HELM/reservations.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Réservations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/KUBERNETES/HELM/maildemo.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Serveur mail de démo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PREPOC/INTEGRATION/KUBERNETES/HELM/tools.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../roles.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rôles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../MAIL/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Mail
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_6" id="__nav_4_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Mail
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MAIL/mail.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Problématique
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MAIL/ecosysteme.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ecosystème
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MAIL/sendmail.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Envoi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MAIL/fetchmail.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Réception
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MAIL/opensmtpd_dovecot.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Opensmtpd Dovecot
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Logiciel
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_7" id="__nav_4_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Logiciel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="distribution_code_composer.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distribution de code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="environnement_dev.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Environnement de dev
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="environnement_dev_env.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Personnalisation environnement de dev
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Importation de données
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="importation.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Importation de données
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#parsage-des-donnees" class="md-nav__link">
    <span class="md-ellipsis">
      Parsage des données
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exploitation-des-donnees" class="md-nav__link">
    <span class="md-ellipsis">
      Exploitation des données
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Exploitation des données">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#import-des-elements-lies-au-contact" class="md-nav__link">
    <span class="md-ellipsis">
      Import des éléments liés au Contact
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#import-des-elements-lies-au-foyer" class="md-nav__link">
    <span class="md-ellipsis">
      Import des éléments liés au foyer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#la-liaison-entre-les-contacts-individuels-et-les-adresses" class="md-nav__link">
    <span class="md-ellipsis">
      La liaison entre les contacts individuels et les adresses
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#les-relations-entre-les-contacts-foyers-et-le-membership" class="md-nav__link">
    <span class="md-ellipsis">
      Les relations entre les contacts, foyers, et le membership
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guidelines-pour-limport" class="md-nav__link">
    <span class="md-ellipsis">
      Guidelines pour l'import
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Guidelines pour l&#39;import">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#outillage-limage-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Outillage : l'image tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parsage" class="md-nav__link">
    <span class="md-ellipsis">
      Parsage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importation" class="md-nav__link">
    <span class="md-ellipsis">
      Importation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../INTEGRATION_CONTINUE/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Intégration Continue
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8" id="__nav_4_8_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            Intégration Continue
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION_CONTINUE/docker_build_push.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker build et push
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION_CONTINUE/tests_automatises.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tests automatisés : Codeception
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION_CONTINUE/tests_phpunit.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tests automatisés : Phpunit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION_CONTINUE/composer_ci.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Composer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION_CONTINUE/trivy_ci.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trivy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION_CONTINUE/sonarqube_ci.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SonarLint et SonarQube
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../ARCHIVES/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    ARCHIVES
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            ARCHIVES
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../FORMATION/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Formation
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Formation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="importation-initiale"><a class="toclink" href="#importation-initiale">Importation initiale</a></h1>
<p>Civiparoisse a besoin de données pour pouvoir rendre service aux paroisses. Les données initiales ont été collectées et stockées dans un fichier excel ad-hoc, dont le format est décrit dans un document tiers. Deux étapes sont nécessaires pour importer les données : parser le fichier excel, puis exploiter les données.</p>
<h2 id="parsage-des-donnees"><a class="toclink" href="#parsage-des-donnees">Parsage des données</a></h2>
<p>Le parsage du fichier excel peut être effectué grâce à la librairie phpoffice/phpspreadsheet, qui est une dépendance (récente) de CiviCRM. Les données parsées correspondent à une partie d'une pseudo-table globale de connaissances sur les paroissiens.</p>
<p>Il a semblé judicieux de mettre le code relatif au parsage des données dans une bibliothèque séparée, afin de pouvoir éventuellement réutiliser le code de parsage pour une validation du fichier Excel hors CiviCRM.</p>
<p>Le parsage est conceptuellement simple : on crée des parseurs de colonnes issus d'une même classe abstraite pour analyser les différents cellules d'une ligne de données, et on met les résultats du parsage dans une structure de données.</p>
<p>Parser une ligne consiste donc à exécuter l'ensemble des parseurs disponibles.</p>
<p>Le code prévoit des contrôles sur les données ; une donnée jugée invalide est ignorée. Les contrôles similaires (par exemple sur la casse, ou sur des expressions rationnelles) sont implémentées dans des classes abstraites qui découlent du parseur principal afin de factoriser le code.</p>
<p>On liste en-dessous les parseurs, et les contrôles effectués. On arrive à déduire du nom du parseur le champ concerné du fichier Excel. En plus des champs proprement dit, on récupère égalemement le numéro de ligne. Celui-ci pourra éventuellement être utile pour les logs de message d'erreur.</p>
<div class="admonition bug">
<p class="admonition-title">Bug</p>
<p>Remarque globale pour tous les parsers "Oui/Non" : vérifier que Excel renvoie bien Oui/Non, et pas Vrai/Faux</p>
</div>
<div class="admonition bug">
<p class="admonition-title">Bug</p>
<p>Code Postal : attention on peut avoir des CP suisses en 4 chiffres, voir éventuellement des CP d'autres pays</p>
</div>
<div class="admonition bug">
<p class="admonition-title">Bug</p>
<p>Téléphones : on peut avoir des numéros à l'étranger (Allemagne, Suisse, ...)    </p>
</div>
<table>
<thead>
<tr>
<th>Parseur</th>
<th>Contrôle</th>
</tr>
</thead>
<tbody>
<tr>
<td>AdresseLigne1Parser</td>
<td>Ne pas matcher la chaîne vide (Regex : <code>'/^[[:space:]]*$/'</code>)</td>
</tr>
<tr>
<td>AdresseLigne2Parser</td>
<td>Ne pas matcher la chaîne vide (Regex : <code>'/^[[:space:]]*$/'</code>)</td>
</tr>
<tr>
<td>AdresseLigne3Parser</td>
<td>Ne pas matcher la chaîne vide (Regex : <code>'/^[[:space:]]*$/'</code>)</td>
</tr>
<tr>
<td>AdulteParser</td>
<td>Doit correspondre soit à la chaîne <code>'Oui'</code> soit à la chaîne <code>'Non'</code></td>
</tr>
<tr>
<td>CiviliteParser</td>
<td>Doit correspondre soit à la chaîne <code>'M.'</code> soit à la chaîne <code>'Mme'</code></td>
</tr>
<tr>
<td>CodePostalParser</td>
<td>Doit matcher <code>'/^([[:upper:]]+-)?[0-9]{5}$/'</code></td>
</tr>
<tr>
<td>DateNaissanceParser</td>
<td>Doit être parsable avec le format DateTime <code>'d/m/Y|'</code></td>
</tr>
<tr>
<td>DiversParser</td>
<td>Ne pas matcher la chaîne vide (Regex : <code>'/^[[:space:]]*$/'</code>)</td>
</tr>
<tr>
<td>ElecteurParser</td>
<td>Doit correspondre soit à la chaîne <code>'Oui'</code> soit à la chaîne <code>'Non'</code></td>
</tr>
<tr>
<td>EmailAutreParser</td>
<td>Doit passer avec <code>filter_var</code> avec <code>FILTER_VALIDATE_EMAIL</code></td>
</tr>
<tr>
<td>EmailPriveParser</td>
<td>Doit passer avec <code>filter_var</code> avec <code>FILTER_VALIDATE_EMAIL</code></td>
</tr>
<tr>
<td>EnfantParser</td>
<td>Doit correspondre soit à la chaîne <code>'Oui'</code> soit à la chaîne <code>'Non'</code></td>
</tr>
<tr>
<td>FoyerAppartenanceParser</td>
<td>Ne pas matcher la chaîne vide (Regex : <code>'/^[[:space:]]*$/'</code>)</td>
</tr>
<tr>
<td>LieuNaissanceParser</td>
<td>Ne pas matcher la chaîne vide (Regex : <code>'/^[[:space:]]*$/'</code>)</td>
</tr>
<tr>
<td>NomConjointParser</td>
<td>Ne pas matcher la chaîne vide (Regex : <code>'/^[[:space:]]*$/'</code>)</td>
</tr>
<tr>
<td>NomNaissanceParser</td>
<td>Doit matcher la Regex <code>'#^[[:upper:]]+([ \-\'/][[:upper:]]+)*$#'</code></td>
</tr>
<tr>
<td>NomParentsParser</td>
<td>Ne pas matcher la chaîne vide (Regex : <code>'/^[[:space:]]*$/'</code>)</td>
</tr>
<tr>
<td>NomParser</td>
<td>Doit matcher la Regex <code>'#^[[:upper:]]+([ \-\'/][[:upper:]]+)*$#'</code></td>
</tr>
<tr>
<td>PaysParser</td>
<td>Ne pas matcher la chaîne vide (Regex : <code>'/^[[:space:]]*$/'</code>)</td>
</tr>
<tr>
<td>PrenomParser</td>
<td>Doit matcher la regex <code>'/^[[:upper:]][[:lower:]éèêëüôïàù]+(-[[:upper:]][[:lower:]éèêëüôïàù]+)*$/'</code></td>
</tr>
<tr>
<td>RowIndexParser</td>
<td>La valeur doit être non vide et numérique (<code>is_numeric</code>)</td>
</tr>
<tr>
<td>TelephoneAutreParser</td>
<td>Doit matcher la Regex <code>'#^00 33 [12345679] [0-9]{2} [0-9]{2} [0-9]{2} [0-9]{2}$#'</code></td>
</tr>
<tr>
<td>TelephoneFixeParser</td>
<td>Doit matcher la Regex <code>'#^00 33 [123459] [0-9]{2} [0-9]{2} [0-9]{2} [0-9]{2}$#'</code></td>
</tr>
<tr>
<td>TelephonePortableParser</td>
<td>Doit matcher la Regex <code>'#^00 33 [67] [0-9]{2} [0-9]{2} [0-9]{2} [0-9]{2}$#'</code></td>
</tr>
<tr>
<td>VilleParser</td>
<td>Doit matcher la Regex <code>'#^[[:upper:]]+([ \-\'/][[:upper:]]+)*$#'</code></td>
</tr>
</tbody>
</table>
<h2 id="exploitation-des-donnees"><a class="toclink" href="#exploitation-des-donnees">Exploitation des données</a></h2>
<p>Plusieurs approches semblent convenir pour exploiter cette pseudo-table :</p>
<ul>
<li>travailler directement en mémoire, en calculant et en mettant à jour des structures de données.</li>
<li>passer par des requêtes SQL que ce soit avec un moteur séparé (par exemple sqlite) ou en utilisant MySQL, et, par exemple, des tables temporaires (voir <a href="https://dev.mysql.com/doc/refman/8.0/en/create-temporary-table.html">https://dev.mysql.com/doc/refman/8.0/en/create-temporary-table.html</a>)</li>
<li>construction petit à petit des enregistrements, avec utilisation de fonctions getOrCreate, et en mettant un peu d'intelligence dans le ParsedContact pour exploiter les données</li>
</ul>
<h3 id="import-des-elements-lies-au-contact"><a class="toclink" href="#import-des-elements-lies-au-contact">Import des éléments liés au Contact</a></h3>
<p>Le parsage crée des objets de type Uepal\CiviImport\ParsedContact. Pour importer les éléments, il faut d'abord commencer par identifier les entités cibles de CiviCRM :</p>
<ul>
<li>le contact : on aura un contact par ligne. Les attributs qui seront stockés sont les suivants :</li>
<li>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="x"> protected function computeContactParams(): array</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="x">  {</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="x">    $cfUtils = CRM_Civiparoisse_Utils_CustomFields::getSingleton();</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="x">    $parsedContact = $this-&gt;getCompositeImportData()-&gt;getParsedContact();</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="x">    $candidates = [&quot;prefix_id:label&quot; =&gt; $parsedContact-&gt;getCivilite(),</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="x">      &quot;gender_id:name&quot; =&gt; $this-&gt;computeContactGenderName($parsedContact),</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="x">      &quot;contact_type:name&quot; =&gt; &quot;Individual&quot;,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="x">      &quot;last_name&quot; =&gt; $parsedContact-&gt;getNom(),</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="x">      $cfUtils-&gt;getFieldNameId(&quot;nom_naissance&quot;) =&gt; $parsedContact-&gt;getNomNaissan</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="x">ce(),</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="x">      &quot;first_name&quot; =&gt; $parsedContact-&gt;getPrenom(),</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="x">      &quot;birth_date&quot; =&gt; CRM_Civiparoisse_Utils_DateFormatter::formatDate($parsedCo</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="x">ntact-&gt;getDateNaissance()),</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="x">      $cfUtils-&gt;getFieldNameId(&quot;lieu_naissance&quot;) =&gt; $parsedContact-&gt;getLieuNaissance(),</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="x">      &#39;household_name&#39; =&gt; $parsedContact-&gt;getFoyerAppartenance()];</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="x">    $candidates = array_filter($candidates);</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="x">    return [&#39;values&#39; =&gt; $candidates];</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="x">  }</span>
</code></pre></div>
</li>
<li>
<p>le téléphone mobile :</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="x">  protected function computeMobilePhoneParams(): array</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="x">  {</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="x">    return [&#39;values&#39; =&gt; [&#39;location_type:name&#39; =&gt; &#39;Accueil&#39;,</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="x">      &#39;phone_type_id:name&#39; =&gt; &#39;Mobile&#39;,</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="x">      &#39;contact_id&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getContactId(),</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="x">      &#39;phone&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getTelephonePortable(),</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="x">      &#39;is_primary&#39; =&gt; 1]];</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="x">  }</span>
</code></pre></div>
<ul>
<li>le téléphone professionnel appelé auparavant "autre"</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="x">  protected function computeOtherPhoneParams(): array</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="x">  {</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="x">    return [&#39;values&#39; =&gt; [&#39;location_type:name&#39; =&gt; &#39;Travail&#39;,</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="x">      &#39;phone_type_id:name&#39; =&gt; &#39;Phone&#39;,</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="x">      &#39;contact_id&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getContactId(),</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="x">      &#39;phone&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getTelephoneAutre(),</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="x">      &#39;is_primary&#39; =&gt; 0]];</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="x">  }</span>
</code></pre></div>
<ul>
<li>le mail privé :</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="x"> protected function computeEmailPriveParam() : array</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="x">  {</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="x">    return [&#39;values&#39; =&gt; [&#39;email&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getEmailPrive(),</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="x">      &#39;contact_id&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getContactId(),</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="x">      &#39;location_type:name&#39; =&gt; &#39;Accueil&#39;,</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="x">      &#39;is_primary&#39; =&gt; TRUE]];</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="x">  }</span>
</code></pre></div>
<ul>
<li>le mail professionnel :</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="x">  protected function computeEmailAutreParam() : array</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="x">  {</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="x">    return [&#39;values&#39; =&gt; [&#39;email&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getEmailAutre(),</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="x">      &#39;contact_id&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getContactId(),</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="x">      &#39;location_type_id:name&#39; =&gt; &#39;Travail&#39;,</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="x">      &#39;is_primary&#39; =&gt; 0</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="x">    ]];</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="x">  }</span>
</code></pre></div>
* la note complémentaire :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="x"> protected function computeNoteDiversParam(): array</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="x">  {</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="x">    return [&#39;values&#39; =&gt; [</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="x">      &#39;note&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getDivers(),</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="x">      &#39;entity_table:name&#39; =&gt; &#39;Contact&#39;,</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="x">      &#39;entity_id&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getContactId(),</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="x">      &#39;contact_id&#39; =&gt;CRM_Core_Session::getLoggedInContactID(),</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="x">      &#39;subject&#39; =&gt; &#39;Note import&#39;</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="x">    ]];</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="x">  }</span>
</code></pre></div>
<h3 id="import-des-elements-lies-au-foyer"><a class="toclink" href="#import-des-elements-lies-au-foyer">Import des éléments liés au foyer</a></h3>
<ul>
<li>le foyer : un foyer sera constitué par un nom de foyer, une adresse, et un numéro de téléphone fixe. Toute altération d'un des champs conduira à un nouveau foyer ; on se souviendra que le foyer est un type de contact. Le foyer est considéré comme une unité familiale (parents et éventuellement enfants).</li>
<li><div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="x"> protected function computeHouseholdParams(): array</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="x">  {</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="x">    return [&#39;values&#39; =&gt; [</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="x">      &#39;contact_type&#39; =&gt; &#39;Household&#39;,</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="x">      &#39;display_name&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getFoyerAppartenance(),</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="x">      &#39;household_name&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getFoyerAppartenance()</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="x">    ]];</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="x">  }</span>
</code></pre></div></li>
<li>l'adresse : l'adresse sera rattachée au foyer. Du fait de la construction du fichier, il serait difficile de faire les séparations fines des constituants de l'adresse pour les faire rentrer exactement dans les champs de civicrm. On utilise donc les lignes d'adresse suplémentaire pour le stockage.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="x"> protected function computeAddressParams(): array</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="x">  {</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="x">    return [&#39;values&#39; =&gt; [&#39;street_address&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getAdresseLigne1(),</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="x">      &#39;supplemental_address_1&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getAdresseLigne2(),</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="x">      &#39;supplemental_address_2&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getAdresseLigne3(),</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="x">      &#39;postal_code&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getCodePostal(),</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="x">      &#39;city&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getVille(),</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="x">      &#39;country_id:label&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getPays(),</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="x">      &#39;contact_id&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getFoyerId(),</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="x">      &#39;is_primary&#39; =&gt; TRUE,</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="x">      &#39;location_type_id:name&#39; =&gt; &#39;Accueil&#39;]];</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="x">  }</span>
</code></pre></div>
<div class="admonition bug">
<p class="admonition-title">Bug</p>
</div>
<p>Pour l'adresse il faut rajouter une variable location_type
  'location_type_id' =&gt; 1, // 1 = domicile, 2 = travail, 3 à 5 pas utilisés dans notre projet </p>
<ul>
<li>le numéro de téléphone fixe : chaque numéro est une entité distincte. Le numéro fixe est relié au foyer, tandis que le numéro mobile et le numéro autre est relié au contact. La distinction entre les numéros de téléphones se fait via le champ <code>location_type_id</code> et phone_type_id (à vérifier : les valeurs de <code>location_type</code> que l'on souhaite utiliser):</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="x">protected function computePhoneParams(): array</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="x">  {</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="x">    return [&#39;values&#39; =&gt; [</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="x">      &#39;contact_id&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getFoyerId(),</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="x">      &#39;phone&#39; =&gt; $this-&gt;getCompositeImportData()-&gt;getParsedContact()-&gt;getTelephoneFixe(),</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="x">      &#39;location_type_id:name&#39; =&gt; &#39;Accueil&#39;,</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="x">      &#39;phone_type_id:name&#39; =&gt; &#39;Phone&#39;,</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="x">      &#39;is_primary&#39; =&gt; 1</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="x">    ]];</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="x">  }</span>
</code></pre></div>
<div class="admonition bug">
<p class="admonition-title">Bug</p>
<p>Pour les téléphones, il faut gérer deux variables</p>
</div>
<p>'location_type_id' =&gt; 1, // 1 = domicile, 2 = travail, 3 à 5 pas utilisés dans notre projet
  'phone_type_id' =&gt; 2, // 1= fixe, 2 = portable, 3 = fax, 4 et 5 pas utilisés dans notre projet</p>
<div class="admonition bug">
<p class="admonition-title">Bug</p>
<p>CAUTION : je ne suis pas sûr que ce soit les bonnes valeurs du location_type</p>
</div>
<ul>
<li>les emails : chaque email constitue également une entité distincte, également reliée au contact, et on utilise également le <code>location_type</code> pour distinguer les emails :</li>
</ul>
<div class="admonition bug">
<p class="admonition-title">Bug</p>
<p>Pour les mails, je ne suis pas sûr que les valeurs location_type ci-dessous soient les bonnes</p>
</div>
<p>'location_type_id' =&gt; 1, // 1 = domicile, 2 = travail, 3 à 5 pas utilisés dans notre projet </p>
<h3 id="la-liaison-entre-les-contacts-individuels-et-les-adresses"><a class="toclink" href="#la-liaison-entre-les-contacts-individuels-et-les-adresses">La liaison entre les contacts individuels et les adresses</a></h3>
<p>Il s'agit ici de créer des adresses pour chaque contact individuel : ces adresses vont être rattachées aux adresses du foyer.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="x"> protected function computeContactAddrWorkload() : array</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="x">  {</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="x">    return [&#39;values&#39;=&gt;[</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="x">      &#39;contact_id&#39;=&gt;$this-&gt;getCompositeData()-&gt;getContactId(),</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="x">      &#39;master_id&#39;=&gt;$this-&gt;getCompositeData()-&gt;getFoyerAddrId()</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="x">    ]];</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="x">  }</span>
</code></pre></div>
<h3 id="les-relations-entre-les-contacts-foyers-et-le-membership"><a class="toclink" href="#les-relations-entre-les-contacts-foyers-et-le-membership">Les relations entre les contacts, foyers, et le membership</a></h3>
<ul>
<li>relation membre de foyer : il s'agi de matérialiser le fait qu'un contact fasse parti d'un foyer. </li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="x">protected function computeMemberOfHouseholdParams(int $ord): array</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="x">  {</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="x">    return [&#39;values&#39; =&gt; [&#39;relationship_type_id:name&#39; =&gt; &#39;Household Member of&#39;,</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="x">      &#39;contact_id_a&#39; =&gt; $this-&gt;getCompositeImportData($ord)-&gt;getContactId(),</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="x">      &#39;contact_id_b&#39; =&gt; $this-&gt;getCompositeImportData($ord)-&gt;getFoyerId()]];</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="x">  }</span>
</code></pre></div>
<ul>
<li>relation adulte : il s'agit en fait des "chefs de famille" - chefs de foyers. Le fait d'activer la case à cocher indique qu'il faut générer une relation chef de famille vers le foyer</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="x">protected function computeHeadOfHouseholdParams(int $ord): array</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="x">  {</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="x">    $compositeImportData = $this-&gt;getCompositeImportData($ord);</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="x">    return [&#39;values&#39; =&gt; [&#39;relationship_type_id:name&#39; =&gt; &#39;Head of Household for&#39;,</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="x">      &#39;contact_id_a&#39; =&gt; $compositeImportData-&gt;getContactId(),</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="x">      &#39;contact_id_b&#39; =&gt; $compositeImportData-&gt;getFoyerId()]];</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="x">  }</span>
</code></pre></div>
<ul>
<li>membre électeur : il s'agit d'un type de membership vers l'organisation de la paroisse ; ce membership est mis en oeuvre du moment que Electeur est activé.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="x"> protected function computeElecteurParams(int $ord): array</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="x">  {</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="x">    return [&#39;values&#39; =&gt; [&#39;membership_type_id.name&#39; =&gt; &#39;Electeur·trice&#39;,</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="x">      &#39;contact_id&#39; =&gt; $this-&gt;getCompositeImportData($ord)-&gt;getContactId()]];</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="x">  }</span>
</code></pre></div>
<ul>
<li>relation conjoint : On effectue une liaison en vérifiant nom et prénom ; on privilégiera le fait de faire parti d'un même foyer pour la sélection du conjoint. Le type de relation lui-même dépendra du nom du foyer, car le nom du foyer reflète le mariage ou la libre union.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="x"> protected function computeSpouseParams(int $ord): array</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="x">  {</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="x">    $spouseId = $this-&gt;retrieveSpouseId($ord);</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="x">    $contactId = $this-&gt;getCompositeImportData($ord)-&gt;getContactId();</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="x">    $relationship = $this-&gt;computeSpouseRelationTypeName($ord);</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="x">    return [&#39;values&#39; =&gt; [&#39;relationship_type_id:name&#39; =&gt; $relationship,</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="x">      &#39;contact_id_a&#39; =&gt; $contactId,</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="x">      &#39;contact_id_b&#39; =&gt; $spouseId]];</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="x">  }</span>
</code></pre></div>
<ul>
<li>relation parent : la relation de parents indique le nom des deux parents. On distingue le fait que les parents soit mariés ou non pour calculer le nom individuel recherché de chaque parent. Le parent est cherché en priorité dans le foyer, et ensuite dans l'ensemble des contacts.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="x">protected function computeParentParam(int $ord, int $parentId): array</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="x">  {</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="x">    $contactId = $this-&gt;getCompositeImportData($ord)-&gt;getContactId();</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="x">    return [&#39;values&#39; =&gt; [&#39;relationship_type_id:name&#39; =&gt; &#39;Child of&#39;,</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="x">      &#39;contact_id_a&#39; =&gt; $contactId,</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="x">      &#39;contact_id_b&#39; =&gt; $parentId]];</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="x">  }</span>
</code></pre></div>
<ul>
<li>membre enfant inscrit: un enfant est uniquement membre du foyer, marqué comme enfant,non marqué comme électeur et n'étant pas majeur. </li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="x">  protected function computeEnfantInscritParam(int $ord): array</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="x">  {</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="x">    return [&#39;values&#39; =&gt; [&#39;membership_type_id.name&#39; =&gt; &#39;Inscrit·e Enfant&#39;,</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="x">      &#39;contact_id&#39; =&gt; $this-&gt;getCompositeImportData($ord)-&gt;getContactId()]];</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="x">  }</span>
</code></pre></div>
<ul>
<li>relation de fratrie : la relation de fratrie est uniquement activé lorsque les <strong><em>deux</em></strong> parents sont les mêmes. </li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a> protected function computeFratrieParam(int $ord,int  $fratrieId) : array
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>  {
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>    $contactId = $this-&gt;getCompositeImportData($ord)-&gt;getContactId();
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>    return [&#39;values&#39; =&gt; [&#39;relationship_type_id:name&#39; =&gt; &#39;Sibling of&#39;,
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>      &#39;contact_id_a&#39; =&gt; $contactId,
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>      &#39;contact_id_b&#39; =&gt; $fratrieId]];
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>  }
</code></pre></div>
<h2 id="guidelines-pour-limport"><a class="toclink" href="#guidelines-pour-limport">Guidelines pour l'import</a></h2>
<p>Le but est ici uniquement de gérer un import initial. Toutefois, si les données de différents lots sont entièrement disjointes, on peut envisager des imports successifs à partir de plusieurs fichiers - même s'il faut garder à l'esprit que le développement n'a pas été prévu pour ça.</p>
<h3 id="outillage-limage-tools"><a class="toclink" href="#outillage-limage-tools">Outillage : l'image tools</a></h3>
<p>La procédure d'import est prévue pour être lancée depuis la ligne de commande (outil cv). De ce fait, on utilisera l'image des outils pour accéder au nécessaire, en effectuant les montages requis (en particulier montage des fichiers, et montage du point d'accès à la BD). Le fichier lui-même pourra être également monté dans l'image, ou copié dans le container lors de l'exécution (par exemple via <code>docker cp</code>).</p>
<h3 id="parsage"><a class="toclink" href="#parsage">Parsage</a></h3>
<p>Avant de lancer l'import proprement dit, il faut vérifier si le parsage se fait correctement. Il est en effet arrivé lors des tests qu'un fichier au format xlsx modifié par LibreOffice a posé problème lors du parsage (mauvaise considération de la dernière ligne renseignée). Dans ce genre de cas, on privilégiera des enregistrements dans des formats natifs (ods, xlsx) du moment que les formats sont supportés par phpspreadsheet.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="c1">#export PHP_IDE_CONFIG=&quot;serverName=civicrm.test&quot;</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="nb">export</span><span class="w"> </span><span class="nv">CIVIPAROISSE_IMPORT_FILEPATH</span><span class="o">=</span><span class="s2">&quot;/app/test2.ods&quot;</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="nb">export</span><span class="w"> </span><span class="nv">CIVIPAROISSE_IMPORT_SHEETNAME</span><span class="o">=</span><span class="s2">&quot;Feuil1&quot;</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>cv<span class="w"> </span>ev<span class="w"> </span><span class="s1">&#39;var_dump(CRM_Civiparoisse_Import_Importer::parse(new Uepal\CiviImport\MiniLogger()))&#39;</span>
</code></pre></div>
<p>Le parseur est prévu pour utiliser un logger spécifié en paramètre. Trois loggers sont notamment à considérer :</p>
<ul>
<li>
<p>le MiniLogger : <code>new Uepal\CiviImport\MiniLogger())</code> : ce logger est inclus dans le code du parseur, et il utilise le error_log de PHP pour logguer les messages</p>
</li>
<li>
<p>le Logger de Civicrm (<code>CRM_Core_Error_Log</code>) : l'accès à ce Logger suppose la présence de CiviCRM. Un helper a été préparé pour accéder à ce logger : <code>CRM_Civiparoisse_Utils_Logger::getLogger</code> :</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="x"> /**</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="x">   * General Purpose CiviCRM logger (psr_log)</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="x">   * @return LoggerInterface</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="x">   */</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="x">  public static function getLogger(): LoggerInterface</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="x">  {</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="x">    return (Container::singleton()-&gt;get(&#39;psr_log&#39;));</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="x">  }</span>
</code></pre></div>
<ul>
<li>le Logger présent dans <code>\Psr\Log\NullLogger</code> : ce logger fait parti du package Composer psr/log, et fait partie des dépendances requises par le parseur. Son intérêt est qu'il ne fait rien, donc ne va pas effectuer des logs, et permet de garder une sortie écran "propre" pour voir ce qui a été parsé.</li>
</ul>
<p>A l'occasion des parsages, on fera en particulier attention si les dates correspondent, et si le nombre d'enregistrement est juste. Le parsage est fait en "Best Effort" : une valeur qui n'est pas validée par les contrôles du système sera ignorée.</p>
<h3 id="importation"><a class="toclink" href="#importation">Importation</a></h3>
<p>L'importation est réalisée également en ligne de commande.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="c1">#export PHP_IDE_CONFIG=&quot;serverName=civicrm.test&quot;</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="nb">export</span><span class="w"> </span><span class="nv">CIVIPAROISSE_IMPORT_FILEPATH</span><span class="o">=</span><span class="s2">&quot;/app/test2.ods&quot;</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="nb">export</span><span class="w"> </span><span class="nv">CIVIPAROISSE_IMPORT_SHEETNAME</span><span class="o">=</span><span class="s2">&quot;Feuil1&quot;</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>cv<span class="w"> </span>ev<span class="w"> </span>-U<span class="w"> </span>drupaladmin<span class="w"> </span><span class="s1">&#39;CRM_Civiparoisse_Import_Importer::parseImport(CRM_Civiparoisse_Utils_Logger::getLogger())&#39;</span>
</code></pre></div>
<p>Si on considère un système fraîchement installé, un moyen qui semble être assez efficace pour effacer une importation est de supprimer l'ensemble des contacts dont l'ID est strictement supérieur à 2, en n'utilisant pas la corbeille (trash). Ceci peut être réalisé depuis l'explorateur d'API v4, depuis les menus de CiviCRM.</p>
<p>On peut vérifier les résultats de l'importation de plusieurs manières :</p>
<ul>
<li>analyser l'exécution de l'import via Xdebug et un IDE</li>
<li>analyser le contenu de la BD via MySQL</li>
<li>analyser le contenu de la BD via des appels API</li>
<li>analyser le contenu de la BD depuis l'interface web de civicrm</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Retour en haut de la page
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Pied de page" >
        
          
          <a href="environnement_dev_env.html" class="md-footer__link md-footer__link--prev" aria-label="Précédent: Personnalisation environnement de dev">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Précédent
              </span>
              <div class="md-ellipsis">
                Personnalisation environnement de dev
              </div>
            </div>
          </a>
        
        
          
          <a href="../INTEGRATION_CONTINUE/index.html" class="md-footer__link md-footer__link--next" aria-label="Suivant: Intégration continue">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Suivant
              </span>
              <div class="md-ellipsis">
                Intégration continue
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["search.suggest", "search.highlight", "search.share", "navigation.sections", "navigation.indexes", "navigation.tabs", "navigation.top", "navigation.footer", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>