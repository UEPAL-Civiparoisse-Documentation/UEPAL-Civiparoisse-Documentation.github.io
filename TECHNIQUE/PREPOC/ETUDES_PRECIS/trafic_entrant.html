
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://uepal-civiparoisse-documentation.github.io/index.html/TECHNIQUE/PREPOC/ETUDES_PRECIS/trafic_entrant.html">
      
      
        <link rel="prev" href="infrastructure.html">
      
      
        <link rel="next" href="traefik.html">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.13">
    
    
      
        <title>Trafic initiateur entrant - Documentation UEPAL Civiparoisse</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#choix-de-larchitecture-pour-le-trafic-initiateur-entrant" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tÃªte">
    <a href="../../../index.html" title="Documentation UEPAL Civiparoisse" class="md-header__button md-logo" aria-label="Documentation UEPAL Civiparoisse" data-md-component="logo">
      
  <img src="../../../assets/uepal-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation UEPAL Civiparoisse
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Trafic initiateur entrant
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Partager" aria-label="Partager" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Onglets" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../index.html" class="md-tabs__link">
        
  
  
    
  
  Documentation Civiparoisse

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../UTILISATION/mode_emploi/index.html" class="md-tabs__link">
          
  
  
    
  
  Mode d'emploi

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../PRESENTATION/index.html" class="md-tabs__link">
          
  
  
    
  
  PrÃ©sentation du projet

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../index.html" class="md-tabs__link">
          
  
  
    
  
  ElÃ©ments techniques

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../FORMATION/index.html" class="md-tabs__link">
          
  
  
    
  
  Formation

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../index.html" title="Documentation UEPAL Civiparoisse" class="md-nav__button md-logo" aria-label="Documentation UEPAL Civiparoisse" data-md-component="logo">
      
  <img src="../../../assets/uepal-logo.svg" alt="logo">

    </a>
    Documentation UEPAL Civiparoisse
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Documentation Civiparoisse
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../UTILISATION/mode_emploi/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Mode d'emploi
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Mode d'emploi
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/introduction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/debuter.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DÃ©buter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/fiches_contact.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GÃ©rer les fiches
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/relations.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GÃ©rer les relations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/liens_paroisses.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GÃ©rer les liens avec la paroisse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/faire_des_recherches_sur_les_contacts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Faire des recherches sur les contacts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/envoyer_un_courriel.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Envoyer un courriel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/groupes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GÃ©rer les groupes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/listes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utiliser les listes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/que_faire_quand.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Que faire quand... ?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/gestion_des_dons_et_edition_des_recus_fiscaux.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gestion des dons et Ã©dition des reÃ§us fiscaux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/creer_et_gerer_un_evenement.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CrÃ©er et gÃ©rer un Ã©vÃ©nement
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/operations_a_mener_regulierement.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpÃ©rations Ã  mener rÃ©guliÃ¨rement
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/gestion_base_donnees.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Administration locale de la base de donnÃ©es
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/prepaper_installation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PrÃ©parer l'installation initiale de CiviParoisse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/nouveautes_CiviParoisse.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Les nouveautÃ©s dans CiviParoisse
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../UTILISATION/mode_emploi/ressources.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ressources utiles
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../PRESENTATION/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    PrÃ©sentation du projet
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            PrÃ©sentation du projet
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PRESENTATION/presentation_fonctionnelle.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PÃ©rimÃ¨tre fonctionnel
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PRESENTATION/presentation_ecosysteme.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EcosystÃ¨me projet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../PRESENTATION/presentation_livrables.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Livrables
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    ElÃ©ments techniques
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            ElÃ©ments techniques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../EXPLOITATION/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Exploitation
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Exploitation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../EXPLOITATION/logs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../POC/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    POC
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            POC
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../POC/remontage_local.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remontage en local
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    PRE_POC
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4" id="__nav_4_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            PRE_POC
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prepoc.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Description gÃ©nÃ©rale
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Etudes - prÃ©cis techniques
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_3" id="__nav_4_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4_3">
            <span class="md-nav__icon md-icon"></span>
            Etudes - prÃ©cis techniques
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="infrastructure.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Infrastructure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Trafic initiateur entrant
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="trafic_entrant.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Trafic initiateur entrant
    
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Table des matiÃ¨res">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matiÃ¨res
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mise-en-oeuvre-du-load-balancer" class="md-nav__link">
    <span class="md-ellipsis">
      Mise en oeuvre du load balancer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mise en oeuvre du load balancer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tronc-commun" class="md-nav__link">
    <span class="md-ellipsis">
      Tronc commun
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protocoles-proxy-et-proxy2" class="md-nav__link">
    <span class="md-ellipsis">
      Protocoles PROXY et PROXY2
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploiement-de-type-tcptls-passthrough" class="md-nav__link">
    <span class="md-ellipsis">
      DÃ©ploiement de type TCP/TLS Passthrough
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploiement-de-type-ssl-offload-depuis-le-load-balancer" class="md-nav__link">
    <span class="md-ellipsis">
      DÃ©ploiement de type SSL Offload depuis le load balancer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploiement-avec-load-balancer-https-inspection-de-paquets-dans-le-load-balancer-et-ingress-en-tcptls-passthrough" class="md-nav__link">
    <span class="md-ellipsis">
      DÃ©ploiement avec load balancer HTTPS, inspection de paquets dans le load balancer et ingress en TCP/TLS passthrough
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploiement-avec-load-balancer-https-inspection-de-paquets-dans-lingress-trafic-interne-chiffre" class="md-nav__link">
    <span class="md-ellipsis">
      DÃ©ploiement avec load balancer HTTPS, inspection de paquets dans l'ingress, trafic interne chiffrÃ©
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploiement-avec-load-balancer-tcp-inspection-de-paquets-dans-lingress-trafic-interne-chiffre" class="md-nav__link">
    <span class="md-ellipsis">
      DÃ©ploiement avec load balancer TCP, inspection de paquets dans l'ingress, trafic interne chiffrÃ©
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utilisation-de-linfrastructure-openstack-firewalling-quasi-traditionnel" class="md-nav__link">
    <span class="md-ellipsis">
      Utilisation de l'infrastructure OpenStack : firewalling quasi-traditionnel
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quelques-ressources" class="md-nav__link">
    <span class="md-ellipsis">
      Quelques ressources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="traefik.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maquettage Traefik
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="identites_certificats.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IdentitÃ©s et certificats
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="waf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web Application Firewall
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="integration_ca.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IntÃ©gration CA Ubuntu
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="minikube_traefik_wildcard.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Minikube + Traefik + Wildcard
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../INTEGRATION/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    OpÃ©rationnel
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_4" id="__nav_4_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_4">
            <span class="md-nav__icon md-icon"></span>
            OpÃ©rationnel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/deploiement_instance.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DÃ©ploiement instance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Description gÃ©nÃ©rale Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_4_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../INTEGRATION/DOCKER/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Images Docker
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_4_4" id="__nav_4_4_4_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_4_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_4_4">
            <span class="md-nav__icon md-icon"></span>
            Images Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/selfkeys.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    selfkeys
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/keys_init.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    keys_init
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/mysql_tls_router.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mysql_tls_router
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/mysql_tls_server.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    mysql_tls_server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/composer_base.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    composer_base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/composer_files.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    composer_files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/tools.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/tools_debug" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    tools_debug
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/init.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    init
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/cron.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    cron
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/httpd.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    httpd
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/httpd_debug.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    httpd_debug
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/update.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    update
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/test_msmtp_dovecot.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    test_msmtp_dovecot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/gen_hashed_ca.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    gen_hashed_ca
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/DOCKER/traefik_docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    traefik_docker
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_4_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../INTEGRATION/KUBERNETES/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_4_5" id="__nav_4_4_4_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_4_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_4_5">
            <span class="md-nav__icon md-icon"></span>
            Kubernetes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/maquettage.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Maquettage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/ressources.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ressources utiles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4_4_5_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../INTEGRATION/KUBERNETES/HELM/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Chart Helm
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_4_4_5_4" id="__nav_4_4_4_5_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_4_4_4_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_4_5_4">
            <span class="md-nav__icon md-icon"></span>
            Chart Helm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/description_generale.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Description gÃ©nÃ©rale
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/db_dbrouter.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DB et DB Router
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/httpd.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Serveur web interne
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/cron.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cron
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/volumes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Volumes (persistants)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/secrets.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Secrets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/reservations.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RÃ©servations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/maildemo.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Serveur mail de dÃ©mo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../INTEGRATION/KUBERNETES/HELM/tools.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../roles.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RÃ´les
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../MAIL/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Mail
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_6" id="__nav_4_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Mail
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MAIL/mail.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ProblÃ©matique
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MAIL/ecosysteme.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EcosystÃ¨me
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MAIL/sendmail.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Envoi
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MAIL/fetchmail.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RÃ©ception
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MAIL/opensmtpd_dovecot.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Opensmtpd Dovecot
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../LOGICIEL/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Logiciel
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_7" id="__nav_4_7_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Logiciel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LOGICIEL/distribution_code_composer.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distribution de code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LOGICIEL/environnement_dev.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Environnement de dev
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LOGICIEL/environnement_dev_env.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Personnalisation environnement de dev
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../LOGICIEL/importation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Importation de donnÃ©es
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../INTEGRATION_CONTINUE/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    IntÃ©gration Continue
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_8" id="__nav_4_8_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_8">
            <span class="md-nav__icon md-icon"></span>
            IntÃ©gration Continue
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../INTEGRATION_CONTINUE/docker_build_push.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker build et push
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../INTEGRATION_CONTINUE/tests_automatises.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tests automatisÃ©s : Codeception
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../INTEGRATION_CONTINUE/tests_phpunit.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tests automatisÃ©s : Phpunit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../INTEGRATION_CONTINUE/composer_ci.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Composer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../INTEGRATION_CONTINUE/trivy_ci.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trivy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../INTEGRATION_CONTINUE/sonarqube_ci.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SonarLint et SonarQube
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ARCHIVES/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    ARCHIVES
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_9">
            <span class="md-nav__icon md-icon"></span>
            ARCHIVES
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../FORMATION/index.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Formation
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Formation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="choix-de-larchitecture-pour-le-trafic-initiateur-entrant"><a class="toclink" href="#choix-de-larchitecture-pour-le-trafic-initiateur-entrant">Choix de l'architecture pour le trafic initiateur entrant</a></h1>
<p>Il semble Ãªtre judicieux de placer les noeuds Kubernetes dans un rÃ©seau privÃ©, sÃ©parÃ© du rÃ©seau public. Au niveau IP au niveau de Kubernetes, il sera de bon ton soit de mettre en oeuvre des objets de type NetworkPolicy pour avoir des limitations plus fortes sur le trafic liÃ© aux containers, soit de mettre en oeuvre un service mesh qui sera configurÃ© avec les limitations Ã©quivalentes.</p>
<p>Le trafic initiateur sortant sera gÃ©rÃ© via du SNAT avec l'option <a href="https://www.ovhcloud.com/fr/public-cloud/gateway/">gateway</a> expliquÃ©e dans le contexte OVH dans les <a href="https://docs.ovh.com/fr/publiccloud/network-services/networking-concepts/">concepts rÃ©seaux du public cloud</a>, et ne pose donc pas de grand problÃ¨me.</p>
<p>En revanche, pour le trafic initiateur entrant, les choses sont plus complexes, et il y a lieu de voir comment on souhaite traiter ce trafic.</p>
<p>Une configuration documentÃ©e chez OVH est le <a href="https://docs.ovh.com/gb/en/kubernetes/using-lb/">load balancer avec une IP flottante</a>. Toutefois, l'Ã©tude plus prÃ©cise des Ã©lÃ©ments de la solution met en Ã©vidence qu'il y a plusieurs variantes qui peuvent Ãªtre mises en oeuvre, et qu'aucune solution ne semble parfaite. La mise en place du load balancer semble Ã©galement devoir Ãªtre regardÃ©e au travers de la <a href="https://github.com/kubernetes/cloud-provider-openstack/blob/master/docs/openstack-cloud-controller-manager/expose-applications-using-loadbalancer-type-service.md">documentation spÃ©cifique du LB du cloud provider openstack</a> pour mieux comprendre les tenants et aboutissants.</p>
<p>Etant donnÃ© qu'aucune solution parfaite ne se dÃ©tache en utilisant directement le load balancer, on pourra Ã©galement chercher Ã  Ã©largir la discussion pour voir si un autre type de solution ne pourrait pas Ã©galement convenir.</p>
<h2 id="mise-en-oeuvre-du-load-balancer"><a class="toclink" href="#mise-en-oeuvre-du-load-balancer">Mise en oeuvre du load balancer</a></h2>
<h3 id="tronc-commun"><a class="toclink" href="#tronc-commun">Tronc commun</a></h3>
<p>La mise en oeuvre du load balancer consiste au niveau de Kubernetes d'instancier un service de type load balancer, et d'utiliser les sÃ©lecteurs pour faire passer le trafic vers un contrÃ´lleur ingress configurÃ© par exemple en daemonset pour Ãªtre prÃ©sent dans tous les noeuds de travail; le contrÃ´lleur ingress va utiliser sa configuration pour jouer un rÃ´le de reverse proxy et envoyer le trafic vers le container httpd de la paroisse concernÃ©e.</p>
<p>Ce tronc commun est assez intÃ©ressant : le load balancer nÃ©cessitant une <a href="https://docs.ovh.com/fr/publiccloud/network-services/networking-concepts/#floatingip">IP virtuelle dite flottante</a>, on peut supposer qu'il y a un mÃ©canisme de failover entre plusieurs instances de loadbalancer qui vont se partager l'IP flottante, ce qui fait qu'il n'y a pas Ã  ce niveau de Single Point Of Failure (SPOF).</p>
<p>De plus, au niveau du load balancer, le fait d'utiliser dans tous les cas le protocole TCP en tant que protocole de transport permet de dÃ©tecter si un contrÃ´lleur ingress ne rÃ©pond plus au minimum au niveau de la couche transport. S'ajoute Ã  celÃ  que le load balancer permet d'envoyer le trafic vers un ensemble d'endpoints grÃ¢ce Ã  la configuration du service au niveau de Kubernetes, on peut donc en dÃ©duire que le load balancer pourra envoyer le trafic vers les noeuds qui fonctionnent, ce qui fait qu'on n'introduit pas de SPOF Ã  ce niveau non plus.</p>
<p>Au niveau d'Openstack, le service en charge de la configuration des load balancers est Octavia. Octavia peut lancer diffÃ©rents types de load balancers, en fonction des drivers chargÃ©s. Dans les load balancers, il y a notamment l'Ã©ventualitÃ© d'utiliser HAProxy. Toutefois, selon la <a href="https://www.ovhcloud.com/en-gb/public-cloud/load-balancer/">fiche commerciale du load balancer</a>, on peut au minimum remarquer qu'il y a le support de plusieurs protocoles, dont TCP, HTTP, HTTPS, PROXY, PROXY2.
On peut trouver une documentation assez intÃ©ressante <a href="https://docs.openstack.org/magnum/ocata/dev/kubernetes-load-balancer.html"> dans un article sur la configuration du load balancer au niveau d'une explication d'Openstack avec Kubernetes</a> et d'autre part, <a href="https://docs.openstack.org//octavia/latest/doc-octavia.pdf">dans la documentation d'Octavia, partie end-user</a>.</p>
<p>Le fait de passer par le load balancer peut amoindrir certains risques d'attaques (par exemple, un ensemble de connexions TCP en partie ouvertes uniquement, ou dans le cas du HTTP, le load balancer peut faire certaines vÃ©rifications sur la requÃªte). Ceci est en partie visible sur la description de la <a href="https://www.ovh.com/fr/ssl-gateway/">SSL Gateway d'OVH</a>, qui est un produit distinct.</p>
<p>En revanche, le fait de passer par le load balancer puis par le noeud ingress fait que l'IP originelle n'est plus disponible "naturellement", puisqu'on a au minimum plusieurs sessions TCP qui prennent part au traitement d'une requÃªte au niveau de la couche applicative (L7).</p>
<p>De plus, en fonction des configurations, dans le cas gÃ©nÃ©ral de plusieurs serveurs qui peuvent traiter une requÃªte, peut Ã©galement se poser la question de la notion de session, et du stockage/partage de la session utilisateur, ou de l'envoi d'une requÃªte vers un serveur spÃ©cifique s'occupant de la session de l'utilisateur. Toutefois, cette problÃ©matique n'a pas encore lieu dans Civiparoisse, puisqu'on ne dÃ©ploie qu'un seul httpd par instance.</p>
<p>Enfin, au niveau de chaque httpd de civiparoisse, si ce n'est plus tÃ´t, on pourra envisager d'utiliser <code>mod_security</code> comme firewall applicatif. <code>Mod_security</code> est d'ailleurs une <a href="https://docs.ovh.com/gb/en/hosting/web_hosting_activating_an_application_firewall/">option sur certains hÃ©bergements OVH</a>.</p>
<h3 id="protocoles-proxy-et-proxy2"><a class="toclink" href="#protocoles-proxy-et-proxy2">Protocoles PROXY et PROXY2</a></h3>
<p>Les protocoles PROXY et PROXY2 sont une innovation qui vient visiblement de HAProxy, et qui n'est vraisemblablement pas documentÃ© dans une RFC, mais dans des <a href="https://github.com/haproxy/haproxy/blob/master/doc/proxy-protocol.txt">spÃ©cifications hÃ©bergÃ©es sur Github</a>. Le propre de ce protocole est de constater que les proxys L4 ne disposent pas de solution standard pour faire remonter les informations d'IP/port originelles jusqu'aux destinataires, tandis que certains proxys L7 (dont reverse proxy HTTP) le font. Le protocole PROXY ajoute au dÃ©but du flux TCP un entÃªte pour faire transiter les informations originelles au destinataire. Le protocole est plutÃ´t textuel dans le cas de PROXYv1, mais est binaire dans le cas de PROXYv2. Le protocole PROXYv2 dÃ©finit en plus des extensions pour pouvoir vÃ©hiculer des informations supplÃ©mentaires en particulier sur les nÃ©gocations SSL (par exemple, la valeur du SNI).</p>
<p>Ce protocole est donc assez simple, mais nÃ©cessite d'Ãªtre implÃ©mentÃ© et activÃ© Ã  la fois par le client et le serveur, et il faut en plus faire confiance au client (d'oÃ¹ des mÃ©canismes de whitelisting par exemple) quant aux informations originelles donnÃ©es, puisque le serveur ne peut pas les vÃ©rifier. Un autre type de protection qui peut Ã©galement faire l'affaire serait une protection protocolaire comme la mise en oeuvre d'IPSec, ou un Ã©ventuel service mesh, en fonction de l'origine de l'information du protocole PROXY.</p>
<p>Ce protocole est gÃ©rÃ© au minimum partiellement dans certains produits : </p>
<ul>
<li>haproxy</li>
<li>curl : l'option <code>--haproxy-protocol</code> permet de gÃ©nÃ©rer des entÃªtes PROXY</li>
<li>apache : le module remote_ip gÃ¨re le protocole PROXY (mais visblement pas PROXY2)</li>
<li>traefik : le protocole PROXY peut Ãªtre employÃ© aussi bien sur le point d'entrÃ©e que vers un serveur "upstream".</li>
</ul>
<h3 id="deploiement-de-type-tcptls-passthrough"><a class="toclink" href="#deploiement-de-type-tcptls-passthrough">DÃ©ploiement de type TCP/TLS Passthrough</a></h3>
<ul>
<li>On a une communication chiffrÃ©e de bout en bout au niveau HTTPS, c'est Ã  dire depuis le naviguateur client jusqu'Ã  l'instance HTTPD Civiparoisse cible</li>
<li>On a plusieurs communications TCP, donc L4, qui vont faire l'aboutement pour la communication L7 :<ul>
<li>le load balancer est configurÃ© pour faire uniquement du load balancing TCP : il y a donc une liaison TCP entre le naviguateur et le load balancer d'une part, et le load balancer et l'ingress d'un noeud Kubernetes d'autre part</li>
<li>l'ingress Kubernetes est rÃ©glÃ© en TLS passthrough : il utilise l'information Server Name Indication prÃ©sente en clair dans le premier paquet de nÃ©gociation TLS pour dÃ©terminer quel serveur cible l'ingress doit contacter : il y a donc une liaison TCP qui va Ãªtre mise en place entre l'ingress et le serveur HTTPD de l'instance Civiparoisse concernÃ©e</li>
</ul>
</li>
</ul>
<p>L'intÃ©rÃªt de cette solution est qu'une seule communication HTTPS est prÃ©sente de bout en bout : il n'y a pas besoin de faire confiance Ã  un prestataire sur le chemin. Ceci est un gage de confiance pour les paroisses. On peut supposer que le load balancer L4 pourra stopper une partie des attaques.</p>
<p>En revanche, cela veut dire qu'une partie des attaques qui auraient pÃ» Ãªtre stoppÃ©es par un load balancer L7 ne seront pas stoppÃ©es, et arriveront jusqu'au serveur. De plus, il y a une configuration et une maintenance de certificat Ã  effectuer sur chaque instance httpd, et des ressources sont prises au niveau du cluster pour les opÃ©rations de chiffrement. Enfin,il est nÃ©cessaire de mette en oeuvre le protocole PROXY pour rÃ©cupÃ©rer les informations de connexion originales, car on ne peut plus se reposer sur l'authentification mutuelle qui a Ã©tÃ© supprimÃ©e selon les directives du Codir de l'Uepal.</p>
<h3 id="deploiement-de-type-ssl-offload-depuis-le-load-balancer"><a class="toclink" href="#deploiement-de-type-ssl-offload-depuis-le-load-balancer">DÃ©ploiement de type SSL Offload depuis le load balancer</a></h3>
<ul>
<li>On a une communication chiffrÃ©e (HTTPS) jusqu'au load balancer,</li>
<li>Le load balancer transmet une requÃªte HTTP au contrÃ´lleur ingress</li>
<li>Le contrÃ´lleur ingress fait office de proxy HTTP et envoie la requÃªte Ã  l'instance civiparoisse</li>
</ul>
<p>L'avantage de cette configuration est que l'on n'a qu'un seul point oÃ¹ on a un certificat, et si on utilise un certificat wildcard, on facilite grandement la configuration de l'ensemble du systÃ¨me, et Ã©conomise des ressources du cluster pour d'Ã©ventuels autres usages.</p>
<p>L'inconvÃ©nient est qu'il faut faire confiance au load balancer, car il aura le certificat wildcard et la clef du certificat pour l'utilisation, verra passer les mots de passe (puisqu'il dÃ©chiffre le trafic), et il faut faire confiance au reste de l'infrastructure et donc au fournisseur, car on n'a pas la main sur l'infrastructure. Il faut Ã©galement configurer le serveur web et le serveur ingress pour pouvoir rÃ©cupÃ©rer l'IP du client via des headers HTTP et tenir compte de l'offloading s'il y a rÃ©Ã©criture des requÃªtes (par exemple liens en HTTPS alors que les requÃªtes tournent sur HTTP). Le fait de faire passer du trafic non chiffrÃ© dans le cluster peut Ã©galement Ãªtre considÃ©rÃ© comme problÃ©matique dans le contexte Civiparoisse.</p>
<h3 id="deploiement-avec-load-balancer-https-inspection-de-paquets-dans-le-load-balancer-et-ingress-en-tcptls-passthrough"><a class="toclink" href="#deploiement-avec-load-balancer-https-inspection-de-paquets-dans-le-load-balancer-et-ingress-en-tcptls-passthrough">DÃ©ploiement avec load balancer HTTPS, inspection de paquets dans le load balancer et ingress en TCP/TLS passthrough</a></h3>
<p>Ce genre de configuration serait en fait le cas d'Ã©cole d'un firewall Ã  inspection de paquets ; sauf que dans le cas d'Ã©cole, on a la main sur le firewall qu'on dÃ©ploie, et qu'on lui fait donc confiance.</p>
<ul>
<li>On a deux communications HTTPS : une communication HTTPS entre le naviguateur et le load balancer d'une part, et une communication HTTPS du load balancer vers une instance Civihttpd d'autre part</li>
<li>Le noeud ingress fait Ã  nouveau du TLS passthrough grÃ¢ce au champ SNI, ce qui conduit Ã  une communication TCP entre le LB et l'ingress d'une part, et l'ingress et l'instance httpd d'autre part. </li>
</ul>
<p>Cette configuration a l'intÃ©rÃªt de chiffrer le trafic de bout en bout, en faisant toutefois confiance Ã  l'Ã©quipement LB. L'information de l'IP du client peut Ãªtre vÃ©hiculÃ©e jusqu'au serveur httpd avec la configuration adÃ©quate des headers HTTP. Le trafic et les requÃªtes peuvent Ãªtre entiÃ¨rement inspectÃ©es par le LB qui peut faire office de firewall.</p>
<p>En revanche, il faut faire confiance Ã  l'Ã©quipement LB, et en plus, la configuration du LB est plus compliquÃ©e. Au niveau d'Openstack, il est possible qu'il faille faire de la configuration extÃ©rieure Ã  Kubernetes pour faire les rÃ©glages adÃ©quats, et il faut donc Ã©tudier la faisabilitÃ© de cette configuration, Ã  cause des interactions de configuration Openstack et Kubernetes. Il y a plus de certificats Ã  gÃ©rer (dont notamment une probable authentification mutuelle TLS entre le LB et le serveur HTTPD, donc probablement une PKI dÃ©diÃ©e), et le certificat wildcard d'entrÃ©e est Ã©galement Ã  gÃ©rer.</p>
<h3 id="deploiement-avec-load-balancer-https-inspection-de-paquets-dans-lingress-trafic-interne-chiffre"><a class="toclink" href="#deploiement-avec-load-balancer-https-inspection-de-paquets-dans-lingress-trafic-interne-chiffre">DÃ©ploiement avec load balancer HTTPS, inspection de paquets dans l'ingress, trafic interne chiffrÃ©</a></h3>
<p>Ce scÃ©nario repose sur 3 communications HTTPS bout Ã  bout :
 * une communication HTTPS entre le navigateur et le load balancer
 * une communication HTTPS entre le load balancer et le contrÃ´leur ingress
 * une communication HTTPS entre le contrÃ´leur ingress et une instance civihttpd</p>
<p>L'intÃ©rÃªt de ce scÃ©nario est que la configuration du load balancer peut Ãªtre plus simple, ou tout du moins plus typique, mais suppose qu'il y a un certificat wildcard d'entrÃ©e Ã  gÃ©rer au niveau du load balancer. Il prÃ©sente aussi la particularitÃ© de pouvoir faire passer l'IP du client via les headers HTTP de proche en proche jusqu'Ã  civihttpd. Il a nÃ©anmoins l'inconvÃ©nient de devoir faire confiance au load balancer.</p>
<h3 id="deploiement-avec-load-balancer-tcp-inspection-de-paquets-dans-lingress-trafic-interne-chiffre"><a class="toclink" href="#deploiement-avec-load-balancer-tcp-inspection-de-paquets-dans-lingress-trafic-interne-chiffre">DÃ©ploiement avec load balancer TCP, inspection de paquets dans l'ingress, trafic interne chiffrÃ©</a></h3>
<p>Ce scÃ©nario repose sur :
* une communication TCP entre le client et le load balancer
* une communication TCP entre le load balancer et l'ingress, en mettant en oeuvre le protocole PROXY pour rÃ©cupÃ©rer les informations initiales de la communication
* une communication HTTPS entre le client et l'ingress utilisant les deux transports TCP Ã©voquÃ©s
* une communication HTTPS entre l'ingress et le serveur cible</p>
<p>L'intÃ©rÃªt de cette configuration est qu'elle permet une configuration plus simple sur les Ã©lÃ©ments externes Ã  l'infrastructure (load balancer configurÃ© en mode TCP), et qu'on garde la main sur la gestion des certificats. La gestion des certificats est simplifiÃ©e car vers l'extÃ©rieur on garde la main sur le certificat wildcard, tandis qu'on peut gÃ©rer ses propres PKI dans le rÃ©seau interne, voire utiliser un service mesh. L'inconvÃ©nient est qu'il faut faire confiance au LoadBalancer et Ã  l'infrastructure du fournisseur si on ne chiffre pas spÃ©cifiquement le trafic entre le loadBalancer et l'ingress.</p>
<h2 id="utilisation-de-linfrastructure-openstack-firewalling-quasi-traditionnel"><a class="toclink" href="#utilisation-de-linfrastructure-openstack-firewalling-quasi-traditionnel">Utilisation de l'infrastructure OpenStack : firewalling quasi-traditionnel</a></h2>
<p>L'infrastructure OpenStack fournit non seulement un support K8S, mais Ã©galement un support plus gÃ©nÃ©ral de machines virtuelles (instances / server, via le service Nova ). De plus, OpenStack fournit des possibilitÃ©s de rÃ©seau via le service Neutron, dont en particulier des rÃ©seaux dÃ©diÃ©s (internes ; par opposition au rÃ©seau fournir par l'opÃ©rateur, rÃ©seau physique quailifiÃ© d'externe), des routeurs, du NAT (SNAT pour l'accÃ¨s Ã  internet, mais Ã©galement de l'IP Floating, qui est du NAT one-to-one (Ã  une IP publique correspond une IP privÃ©e)). Du coup, on peut songer Ã  d'autres infrastructures de firewall, dont :</p>
<ul>
<li>
<p>security groups : cette fonctionnalitÃ© permet d'appliquer des rÃ¨gles egress et ingress au niveau des ports des rÃ©seaux virtuels d'Openstack. C'est donc une solution standard de firewalling Openstack (selon la documentation de niveau L2 Ã  L4) : <a href="https://docs.openstack.org/security-guide/networking/services.html">https://docs.openstack.org/security-guide/networking/services.html</a> ; <a href="https://docs.openstack.org/python-openstackclient/zed/cli/command-objects/security-group-rule.html">https://docs.openstack.org/python-openstackclient/zed/cli/command-objects/security-group-rule.html</a></p>
</li>
<li>
<p>firewall as a service : cette fonctionnalitÃ© d'Openstack permet d'avoir un service tiers qui va instaurer des rÃ¨gles de firewalling iptables (commandes neutron firewall-rule-create) ; le but est de pouvoir fournir des configurations plus riches que celles des security groups selon <a href="https://docs.openstack.org/security-guide/networking/services.html">https://docs.openstack.org/security-guide/networking/services.html</a> ; <a href="https://docs.openstack.org/newton/networking-guide/fwaas.html">https://docs.openstack.org/newton/networking-guide/fwaas.html</a></p>
</li>
<li>
<p>routeur-firewall : mettre le firewall avec un port dans un rÃ©seau sÃ©parÃ© et un port dans le rÃ©seau Kubernetes, faire pointer l'IP flottante vers le rÃ©seau sÃ©parÃ© et faire du port forwarding vers le rÃ©seau K8S : firewall sous forme de machine virtuelle par exemple</p>
</li>
<li>
<p>firewall transparent (bridgÃ©) : le fonctionnement de ce firewall repose habituellement sur l'utilisation de deux VLAN qui sont de part et d'autre du firewall ; le firewall fait de la commutation L2 et applique les rÃ¨gles de firewalling au passage. Ce mode de fonctionnement est un peu dÃ©licat Ã  mettre en oeuvre, car les rÃ©seaux Openstack self-service sont prÃ©vus pour Ãªtre des rÃ©seaux plats, et sont prÃ©vus pour une connectivitÃ© de niveau 3 ; donc il vaut mieux Ã©viter ce genre de fonctionnement.</p>
</li>
<li>
<p>bridge-routing : le fonctionnement de ce mode rend le firewall Ã©galement quasi transparent : du cÃ´tÃ© interne, on a un sous-rÃ©seau du rÃ©seau externe ;  depuis le cÃ´tÃ© interne le firewall est vu comme un routeur L3, et le rÃ©seau utilise ce routeur pour sortir ; cÃ´tÃ© externe, le routeur fait de la proxyfication ARP pour rÃ©pondre Ã  la place des machines qui sont situÃ©es sur le sous-rÃ©seau interne : le routeur n'est ainsi pas considÃ©rÃ© comme un routeur, mais le trafic passera quand mÃªme par lui. Toutefois, on va Ã©viter de passer par ce genre de mÃ©canisme, puisque les rÃ©seaux Openstack sont prÃ©vus pour une connectivitÃ© de niveau 3.</p>
</li>
<li>
<p>firewall externalisÃ© : proxy externalisÃ©, avec des tunnels vers l'application.</p>
</li>
</ul>
<h2 id="quelques-ressources"><a class="toclink" href="#quelques-ressources">Quelques ressources</a></h2>
<p>https://www.fortinet.com/content/dam/fortinet/assets/data-sheets/fortigate-cnf.pdf</p>
<p>https://assets.barracuda.com/assets/docs/dms/Barracuda_Web_Application_Firewall_WP_Benefits_of_Proxy_Based_WAFS.pdf</p>
<p>https://assets.barracuda.com/assets/docs/dms/Barracuda_Web_Application_Firewall_Vx_DS_US_4-5.pdf</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Retour en haut de la page
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Pied de page" >
        
          
          <a href="infrastructure.html" class="md-footer__link md-footer__link--prev" aria-label="PrÃ©cÃ©dent: Infrastructure">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                PrÃ©cÃ©dent
              </span>
              <div class="md-ellipsis">
                Infrastructure
              </div>
            </div>
          </a>
        
        
          
          <a href="traefik.html" class="md-footer__link md-footer__link--next" aria-label="Suivant: Maquettage Traefik">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Suivant
              </span>
              <div class="md-ellipsis">
                Maquettage Traefik
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["search.suggest", "search.highlight", "search.share", "navigation.sections", "navigation.indexes", "navigation.tabs", "navigation.top", "navigation.footer", "toc.follow", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>